<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520" font-family="Inter, system-ui, sans-serif" role="img" aria-labelledby="arch-title arch-desc">
  <title id="arch-title">MCP Gateway 6-Layer Security Pipeline</title>
  <desc id="arch-desc">Architecture diagram showing AI Client connecting through MCP Gateway's 6-layer pipeline (Policy, Static, Semantic, Council, Sanitize, Sandbox) to MCP Servers, with 6 Gemini 3 integration points and evidence trail.</desc>
  <defs>
    <linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#4285f4"/>
      <stop offset="100%" stop-color="#1a73e8"/>
    </linearGradient>
    <linearGradient id="g2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#ea4335"/>
      <stop offset="100%" stop-color="#c5221f"/>
    </linearGradient>
    <linearGradient id="g3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#34a853"/>
      <stop offset="100%" stop-color="#1e8e3e"/>
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="520" rx="16" fill="#f8fafc"/>

  <!-- Title -->
  <text x="450" y="36" text-anchor="middle" font-size="20" font-weight="700" fill="#1f2937">MCP Gateway — 6-Layer Security Pipeline</text>

  <!-- AI Client -->
  <rect x="30" y="70" width="140" height="60" rx="12" fill="#e0e7ff" stroke="#6366f1" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="100" y="98" text-anchor="middle" font-size="13" font-weight="600" fill="#4338ca">AI Client</text>
  <text x="100" y="114" text-anchor="middle" font-size="10" fill="#6366f1">Claude / ChatGPT</text>

  <!-- Arrow -->
  <line x1="170" y1="100" x2="210" y2="100" stroke="#6366f1" stroke-width="2" marker-end="url(#arrowBlue)"/>
  <defs><marker id="arrowBlue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#6366f1"/></marker></defs>

  <!-- MCP Gateway Box -->
  <rect x="210" y="55" width="460" height="90" rx="14" fill="url(#g1)" filter="url(#shadow)"/>
  <text x="440" y="80" text-anchor="middle" font-size="16" font-weight="700" fill="#fff">MCP Gateway</text>

  <!-- Layers -->
  <g transform="translate(225, 90)">
    <rect width="62" height="28" rx="6" fill="rgba(255,255,255,0.2)"/><text x="31" y="18" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">L1 Policy</text>
  </g>
  <g transform="translate(295, 90)">
    <rect width="62" height="28" rx="6" fill="rgba(255,255,255,0.2)"/><text x="31" y="18" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">L2 Static</text>
  </g>
  <g transform="translate(365, 90)">
    <rect width="70" height="28" rx="6" fill="rgba(255,255,255,0.25)"/><text x="35" y="18" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">L3 Semantic</text>
  </g>
  <g transform="translate(443, 90)">
    <rect width="66" height="28" rx="6" fill="rgba(255,255,255,0.25)"/><text x="33" y="18" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">L4 Council</text>
  </g>
  <g transform="translate(517, 90)">
    <rect width="66" height="28" rx="6" fill="rgba(255,255,255,0.2)"/><text x="33" y="18" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">L5 Sanitize</text>
  </g>
  <g transform="translate(591, 90)">
    <rect width="68" height="28" rx="6" fill="rgba(255,255,255,0.25)"/><text x="34" y="18" text-anchor="middle" font-size="9" fill="#fff" font-weight="600">L6 Sandbox</text>
  </g>

  <!-- Arrow to MCP Servers -->
  <line x1="670" y1="100" x2="710" y2="100" stroke="#1a73e8" stroke-width="2" marker-end="url(#arrowDBlue)"/>
  <defs><marker id="arrowDBlue" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#1a73e8"/></marker></defs>

  <!-- MCP Servers -->
  <rect x="710" y="70" width="160" height="60" rx="12" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="790" y="98" text-anchor="middle" font-size="13" font-weight="600" fill="#92400e">MCP Servers</text>
  <text x="790" y="114" text-anchor="middle" font-size="10" fill="#b45309">17,500+ registered</text>

  <!-- Gemini 3 Integration Points -->
  <text x="450" y="185" text-anchor="middle" font-size="16" font-weight="700" fill="#1f2937">6 Gemini 3 Integration Points</text>

  <!-- Row 1: 3 components -->
  <rect x="40" y="210" width="250" height="90" rx="10" fill="#fff" stroke="#e5e7eb" stroke-width="1" filter="url(#shadow)"/>
  <rect x="40" y="210" width="250" height="28" rx="10" fill="url(#g1)"/>
  <text x="165" y="229" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">1. AI Council</text>
  <text x="55" y="255" font-size="10" fill="#4b5563">thinking_level="high"</text>
  <text x="55" y="270" font-size="10" fill="#4b5563">google_search grounding</text>
  <text x="55" y="285" font-size="10" fill="#4b5563">structured CouncilVerdict output</text>

  <rect x="320" y="210" width="250" height="90" rx="10" fill="#fff" stroke="#e5e7eb" stroke-width="1" filter="url(#shadow)"/>
  <rect x="320" y="210" width="250" height="28" rx="10" fill="url(#g1)"/>
  <text x="445" y="229" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">2. Semantic Scanner</text>
  <text x="335" y="255" font-size="10" fill="#4b5563">thinking_level="high"</text>
  <text x="335" y="270" font-size="10" fill="#4b5563">SemanticScanResult schema</text>
  <text x="335" y="285" font-size="10" fill="#4b5563">Detects intent manipulation</text>

  <rect x="600" y="210" width="270" height="90" rx="10" fill="#fff" stroke="#e5e7eb" stroke-width="1" filter="url(#shadow)"/>
  <rect x="600" y="210" width="270" height="28" rx="10" fill="url(#g2)"/>
  <text x="735" y="229" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">3. RedTeam Generator</text>
  <text x="615" y="255" font-size="10" fill="#4b5563">thinking_level="high"</text>
  <text x="615" y="270" font-size="10" fill="#4b5563">Generates novel attack payloads</text>
  <text x="615" y="285" font-size="10" fill="#4b5563">RedTeamGeneration schema</text>

  <!-- Row 2: 3 components -->
  <rect x="40" y="320" width="250" height="90" rx="10" fill="#fff" stroke="#e5e7eb" stroke-width="1" filter="url(#shadow)"/>
  <rect x="40" y="320" width="250" height="28" rx="10" fill="url(#g2)"/>
  <text x="165" y="339" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">4. RedTeam Evaluator</text>
  <text x="55" y="365" font-size="10" fill="#4b5563">PayloadSafetyVerdict schema</text>
  <text x="55" y="380" font-size="10" fill="#4b5563">Safety evaluation of payloads</text>
  <text x="55" y="395" font-size="10" fill="#4b5563">thinking_level="high"</text>

  <rect x="320" y="320" width="250" height="90" rx="10" fill="#fff" stroke="#e5e7eb" stroke-width="1" filter="url(#shadow)"/>
  <rect x="320" y="320" width="250" height="28" rx="10" fill="url(#g3)"/>
  <text x="445" y="339" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">5. Causal Web Sandbox</text>
  <text x="335" y="365" font-size="10" fill="#4b5563">url_context + google_search</text>
  <text x="335" y="380" font-size="10" fill="#4b5563">DOM/A11y/Network analysis</text>
  <text x="335" y="395" font-size="10" fill="#4b5563">WebSecurityVerdict schema</text>

  <rect x="600" y="320" width="270" height="90" rx="10" fill="#fff" stroke="#e5e7eb" stroke-width="1" filter="url(#shadow)"/>
  <rect x="600" y="320" width="270" height="28" rx="10" fill="url(#g3)"/>
  <text x="735" y="339" text-anchor="middle" font-size="12" font-weight="600" fill="#fff">6. Agent Scan</text>
  <text x="615" y="365" font-size="10" fill="#4b5563">function_calling (multi-turn)</text>
  <text x="615" y="380" font-size="10" fill="#4b5563">Autonomous tool selection</text>
  <text x="615" y="395" font-size="10" fill="#4b5563">AgentScanResult schema</text>

  <!-- Evidence Trail -->
  <rect x="160" y="440" width="580" height="55" rx="10" fill="#f0fdf4" stroke="#86efac" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="450" y="463" text-anchor="middle" font-size="13" font-weight="600" fill="#166534">Evidence Trail (JSONL)</text>
  <text x="450" y="480" text-anchor="middle" font-size="10" fill="#15803d">Every verdict produces structured evidence — auditable and explainable</text>

  <!-- Gemini badge -->
  <rect x="10" y="480" width="120" height="24" rx="12" fill="#4285f4"/>
  <text x="70" y="496" text-anchor="middle" font-size="10" font-weight="600" fill="#fff">Powered by Gemini 3</text>

  <!-- Test badge -->
  <rect x="770" y="480" width="120" height="24" rx="12" fill="#34a853"/>
  <text x="830" y="496" text-anchor="middle" font-size="10" font-weight="600" fill="#fff">401 Tests Passing</text>
</svg>